"use strict";var SatakuMessenger=function(){var e={events:{},debug:new SatakuLogger({warn:{undef:["%s Messenger - Event undefined, further execution prevented -> %s",SatakuLogger.prototype.stylesheet.messenger],nullData:["%s Messenger - Event invoked without any data -> %s",SatakuLogger.prototype.stylesheet.messenger],override:["%s Messenger - Event override! -> %s",SatakuLogger.prototype.stylesheet.messenger]},log:{receive:["%s Messenger - Receive frame -> %s %O",SatakuLogger.prototype.stylesheet.messenger],sendMsg:["%s Messenger - Sent frame -> %s %O",SatakuLogger.prototype.stylesheet.messenger],register:["%s Messenger - New event registered -> %s",SatakuLogger.prototype.stylesheet.messenger],start:["%s Messenger - Start listening for messages",SatakuLogger.prototype.stylesheet.messenger],notMine:["%s Messenger - Receive not mine frame",SatakuLogger.prototype.stylesheet.messenger],notHandled:["%s Messenger - Not handled -> %O",SatakuLogger.prototype.stylesheet.messenger]}}),getSendMsgBasicDataObj:function(e,t){return{subject:e,data:t,satakuId:s.satakuId}},receiveMsg:function(t){var n=t.message?"message":"data",a=t[n];if(void 0===a.satakuId)return void e.debug.log("notHandled",s.name,a);a.satakuId==s.satakuId?(e.debug.log("receive",s.name,a.subject,a),void 0!==a.data?void 0!==e.events[a.subject]?e.events[a.subject](a.data):e.debug.warn("undef",s.name,a.subject):(e.events[a.subject](),e.debug.warn("nullData",s.name,a.subject))):e.debug.log("notMine",s.name)}},s={name:null,host:null,satakuId:null,register:function(t,n){void 0!==e.events[t]&&e.debug.warn("override",s.name,t),e.events[t]=n,e.debug.log("register",s.name,t)},sendMsg:function(t,n){var a=e.getSendMsgBasicDataObj(t,n);window.parent.postMessage(a,s.host),e.debug.log("sendMsg",s.name,a.subject,a)}};return function(t){return s.stkExt({host:t.host,satakuId:t.satakuId,name:t.runModeAlias.toUpperCase()}),e.debug.log("start",s.name),window.stkListen("message",e.receiveMsg,!1),SatakuMessenger=null,s}}();