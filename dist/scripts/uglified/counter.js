"use strict";var SatakuCounter=function(){return function(e,t){var n={canvas:null,context:null,progress:null,fontSize:null,iterations:null,tickerReference:null,triangleAnchors:[[null,null],[null,null],[null,null]],time:{start:null,flow:null},sketches:{arc:function(e,t){return n.setContext(e,t),t.beginPath(),t.arc(0,0,e.radius||100,-.5*Math.PI,2*(e.endAngle||0)*Math.PI-.5*Math.PI),t[!0===e.strokeOnly?"stroke":"fill"](),n.sketches},triangle:function(e,t){return n.setContext(e,t),t.beginPath(),t.moveTo(n.triangleAnchors[0][0],n.triangleAnchors[0][1]),t.lineTo(n.triangleAnchors[1][0],n.triangleAnchors[1][1]),t.lineTo(n.triangleAnchors[2][0],n.triangleAnchors[2][1]),t.closePath(),t.fill(),n.sketches},text:function(e,t){return n.setContext(e,t),t.fillText(e.text||3,0,0),n.sketches}},handlers:{onMouseEnter:function(e){r.reset(),n.tickerReference=SatakuTicker.push(n.update)},onMouseLeave:function(e){r.reset()}},setContext:function(e,t){t=t||n.context,e.stkExt({lineWidth:e.lineWidth||1,font:e.font||"46px Arial",fillStyle:e.fillStyle||"#fff",textAlign:e.textAlign||"center",strokeStyle:e.strokeStyle||"#fff",textBaseline:e.textBaseline||"middle",scale:void 0===e.scale?[1,1]:e.scale,translate:void 0===e.translate?[.5*r.size,.5*r.size]:e.translate}),t.stkExt({font:e.font,textAlign:e.textAlign,lineWidth:e.lineWidth,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle,textBaseline:e.textBaseline}),t.setTransform(e.scale[0],0,0,e.scale[1],e.translate[0],e.translate[1])},prepareContext:function(){n.canvas=document.stkCreate("canvas",{width:r.size,height:r.size}),n.context=n.canvas.getContext("2d"),r.wrapper.appendChild(n.canvas)},setListeners:function(){r.area.stkListen("mouseenter",n.handlers.onMouseEnter,!1),r.area.stkListen("mouseleave",n.handlers.onMouseLeave,!1)},update:function(){n.time.flow=window.performance.now()-n.time.start,n.progress=n.time.flow/r.timeout,n.progress>1&&(n.progress=1),r.draw(),1===n.progress&&(r.reset(),r.onActionHandler&&!r.static&&r.onActionHandler(void 0,!0,r.id))}},r={id:1,size:100,timeout:3e3,textSize:.5,area:document,triangleSize:.25,onActionHandler:null,textFillStyle:"#fff",wrapper:document.body,triangleFillStyle:"#fff",outerRimStrokeStyle:"#fff",staticOuterRimStrokeStyle:"#fff",innerRimStrokeStyle:"#fff",layerFillStyle:"rgba(0, 0, 0, 0.5)",staticLayerFillStyle:"rgba(0, 0, 0, 0.5)",outerRimLineWidth:3,innerRimLineWidth:1,innerRadiusSize:.45,reset:function(){n.progress=null,n.time.start=window.performance.now(),SatakuTicker.kill(n.tickerReference),r.draw()},kill:function(){r.area.stkStopListening("mouseenter",n.handlers.onMouseEnter,!1),r.area.stkStopListening("mouseleave",n.handlers.onMouseLeave,!1),r.wrapper.remove()},draw:function(e){e=e||n.context,e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r.size+1,r.size+1),null===n.progress?n.sketches.arc({radius:.45*r.size,fillStyle:r.staticLayerFillStyle,endAngle:1},e):n.sketches.arc({fillStyle:r.layerFillStyle,lineWidth:r.outerRimLineWidth,strokeStyle:"transparent",radius:.45*r.size,endAngle:1},e),n.sketches.arc({strokeOnly:!0,radius:.45*r.size,lineWidth:r.outerRimLineWidth,strokeStyle:null===n.progress?r.staticOuterRimStrokeStyle:r.outerRimStrokeStyle,endAngle:null===n.progress?1:n.progress*n.iterations-Math.floor(n.progress*n.iterations)},e).arc({strokeOnly:!0,lineWidth:r.innerRimLineWidth,strokeStyle:r.innerRimStrokeStyle,radius:r.innerRadiusSize*r.size-r.outerRimLineWidth,endAngle:null===n.progress?0:n.progress},e),null===n.progress?n.sketches.triangle({fillStyle:r.triangleFillStyle},e):n.sketches.text({fillStyle:r.textFillStyle,font:n.fontSize+"px Arial",text:Math.ceil(n.iterations-n.progress*n.iterations)},e),e.setTransform(1,0,0,1,0,0)}};return void 0!==t&&r.stkExt(t),n.stkExt({iterations:r.timeout/1e3,fontSize:Math.round(r.textSize*r.size),triangleAnchors:function(){var e=r.triangleSize*r.size,t=.5*e*Math.sqrt(3);return[[-1/3*t,-.5*e],[-1/3*t,.5*e],[2/3*t,0]]}()}),2===e.runMode?r:(n.prepareContext(),r.static||1!==e.deviceType||1!==e.runMode||n.setListeners(),r.reset(),r)}}();