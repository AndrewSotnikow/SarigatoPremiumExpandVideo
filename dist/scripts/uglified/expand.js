"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function mainFunction(e,t){function o(){var e=function(){var e=function(e){return document.getElementById(e)},t=function(e){return[].concat(_toConsumableArray(document.querySelectorAll(e)))};return{intro:e("intro"),introBg:t(".introBg"),introElements:t(".introElements"),introProduct:t(".introProduct"),main:e("main")}}();setTimeout(function(){e.intro.classList.remove("hide")},1500),setTimeout(function(){e.introBg.forEach(function(e,t){setTimeout(function(){e.classList.remove("bgTransition")},200*t)})},1e3),setTimeout(function(){setTimeout(function(){},400),setTimeout(function(){e.introElements.forEach(function(e,t){e.classList.remove("elTransform"+t),e.classList.remove("hide")}),e.introProduct.forEach(function(e,t){e.classList.remove("prodTransform"+t),e.classList.remove("hide")})},800)},1500),setTimeout(function(){setTimeout(function(){e.introBg.forEach(function(t,o){e.intro.classList.add("hide")})},1e3),setTimeout(function(){e.introElements.forEach(function(e,t){e.classList.add("elTransform"+t),e.classList.add("hide")})},400),setTimeout(function(){e.introProduct.forEach(function(e,t){e.classList.add("prodTransform"+t),e.classList.add("hide")})},400),setTimeout(function(){e.main.classList.remove("hide"),i.init()},1500)},4e3)}function n(e){var t=function(){var e=function(e){return document.getElementById(e)};return{main:e("main"),outro:e("outro"),bgPink:e("outroBgPink"),bgGrey:e("outroBgGrey"),logo:e("outroLogo"),close:e("close-expand")}}();t.main.classList.add("hide"),t.close.classList.add("hide"),t.outro.classList.remove("hide");setTimeout(function(){t.bgPink.classList.remove("outroTransform"),setTimeout(function(){t.bgGrey.classList.remove("outroTransform"),setTimeout(function(){t.bgGrey.classList.remove("outroTransform"),setTimeout(function(){t.logo.classList.remove("hide"),setTimeout(function(){t.outro.classList.add("hide"),setTimeout(function(){e()},500)},1e3)},500)},500)},500)},1e3)}Window.APP={},Window.APP.intro=o,Window.APP.outro=n;var i=function(){var e=function(e){return document.getElementById(e)},t=function(e){return document.querySelector(e)},o=function(e){return[].concat(_toConsumableArray(document.querySelectorAll(e)))};return{intro:e("intro"),bgViolet:e("bgViolet"),bgPink:e("bgPink"),bgGrey:e("bgGrey"),bg:o(".bg"),bottle:e("bottle"),bottle2:e("bottle2"),bottleShadow:e("bottleShadow"),glass:e("glass"),tin:e("tin"),tin2:e("tin2"),tinShadow:e("tinShadow"),prodContainer:e("prodContainer"),product:o(".product"),dragElements:o(".dropElement"),dragContainer:t(".dragContainer"),staticImg:e("static"),shaker:e("shaker"),shakerContainer:t(".shaker"),lid:e("lid"),shakerShadow:e("shakerShadow"),circle:e("circle"),bgLeft:t(".bgLeft"),logo:t(".logo"),text:t(".text"),cta:e("cta"),bgCta:t(".bgCta"),legal:t(".legal"),bgRight:t(".bgRight"),go:t(".go"),guide2:e("guide2"),guide:e("guide"),close:e("close-expand"),expand:e("expand"),counter:t(".counter"),counterContainer:e("container"),repeat:e("repeat"),stepsNumbers:o(".number"),droppedItemCounter:0,maxCounter:3,state:{stage2:!1,stopGame:!1,replayGame:!1,runInterval:!1},intervalId:{prodRotationId:null,prodRotationId2:null},method:{removeClass:function(e,t){e.map(function(e){e.classList.remove(t)})},addClass:function(e,t){e.map(function(e){e.classList.add(t)})},productRotation:function(){i.bottle2.classList.toggle("hide"),i.tin2.classList.toggle("hide")},productShadowRotation:function(){i.bottleShadow.classList.toggle("hide"),i.tinShadow.classList.toggle("hide")},productInterval:function(){i.bottle2.classList.remove("hide"),i.tin2.classList.add("hide"),i.bottleShadow.classList.remove("hide"),i.prodRotationId2=setInterval(function(){i.method.productRotation(),i.method.productShadowRotation()},3e3),setTimeout(function(){i.prodRotationId=setInterval(function(){i.method.productRotation(),i.method.productShadowRotation()},3e3)},1500)}},mainIntro:function(){var e=[i.logo,i.text,i.legal,i.bgCta],t=[i.go,i.counter,i.close,i.bg[2]],o=[i.staticImg,i.cta,i.shaker,i.shakerContainer,i.shakerShadow,i.close,i.circle,i.guide,i.guide2,i.dragContainer].concat(_toConsumableArray(i.dragElements));setTimeout(function(){i.method.removeClass(i.bg,"expandTransitionLeft"),setTimeout(function(){i.method.removeClass(t,"expandTransitionRight"),i.method.removeClass(e,"expandTransitionLeft")},500),setTimeout(function(){o.forEach(function(e){e.classList.remove("hide"),e.classList.remove("translateUp"),i.dragContainer.classList.add("hand")})},800)},300)},endGame:function(){var e=[i.circle,i.guide,i.counterContainer],t=[i.bottle2,i.prodContainer];i.lid.classList.remove("hide"),setTimeout(function(){i.lid.classList.remove("translateUp"),i.dragElements.map(function(e){e.classList.add("hide")}),i.method.addClass(e,"hide"),i.repeat.classList.remove("hide"),i.product.map(function(e){e.classList.add("hide")})},300),setTimeout(function(){i.shakerShadow.classList.add("hide"),i.shakerContainer.classList.add("shakerRotate"),i.shaker.classList.add("translateUp"),i.lid.classList.add("translateUp")},1500),setTimeout(function(){i.method.removeClass(t,"hide"),i.glass.classList.add("glassIn"),i.shakerContainer.classList.add("hide"),i.product.map(function(e){e.classList.remove("translateUp")}),i.bottleShadow.classList.remove("hide"),i.method.removeClass(t,"hide")},2e3),setTimeout(function(){i.method.productInterval(),i.shakerContainer.classList.remove("shakerRotate")},2500),i.state.replayGame=!0},retryGame:function(){var e=[i.shaker,i.shakerContainer,i.circle,i.guide,i.guide2],t=[i.repeat,i.bottleShadow,i.tinShadow];i.state.replayGame&&(clearInterval(i.prodRotationId),clearInterval(i.prodRotationId2),i.product.map(function(e){e.classList.add("translateUp")}),i.glass.classList.remove("glassIn"),i.method.addClass(t,"hide"),i.method.addClass(i.stepsNumbers,"hide"),i.stepsNumbers[0].classList.remove("hide"),i.counterContainer.classList.remove("hide"),setTimeout(function(){i.method.addClass(i.product,"hide"),i.shaker.classList.remove("translateUp"),setTimeout(function(){i.shakerShadow.classList.remove("hide")},200),i.shakerContainer.classList.remove("shakerRotate"),i.method.removeClass(e,"hide"),i.dragElements.map(function(e){setTimeout(function(){e.classList.remove("hide")},500),e.style.left="",e.style.top="",e.classList.remove("toShaker")}),setTimeout(function(){i.guide.classList.remove("hide")},800)},1e3),i.state.gameOver=!1,i.state.replayGame=!1)},moveAndHide:function(e){var t=void 0,o=void 0;e.addEventListener("mousedown",function(n){e.classList.add("grab"),t=!0,o=!0,n.preventDefault(),i.circle.addEventListener("mouseenter",function(t){o&&e.pageX===i.circle.pageX&&e.pageY===i.circle.pageY&&(o=!1,e.classList.add("toShaker"),i.guide2.classList.add("hide"),i.droppedItemCounter++,i.droppedItemCounter<i.maxCounter?i.stepsNumbers.forEach(function(e,t){return t===i.droppedItemCounter?e.classList.remove("hide"):e.classList.add("hide")}):i.droppedItemCounter===i.maxCounter&&(i.stepsNumbers.forEach(function(e,t){return t===i.droppedItemCounter?e.classList.remove("hide"):e.classList.add("hide")}),console.log(i.droppedItemCounter),i.droppedItemCounter=0,i.endGame()))})}),window.addEventListener("mousemove",function(o){if(t){var n=i.clientX/window.innerWidth*100,s=i.clientY/window.innerHeight*100;e.style.top=s.toFixed(2)+"%",e.style.left=n.toFixed(2)+"%"}}),window.addEventListener("mouseup",function(n){n.preventDefault(),t=!1,o=!1,e.classList.remove("grab")})},init:function(){i.mainIntro(),i.dragElements.map(function(e,t){i.moveAndHide(e,t)}),i.repeat.addEventListener("click",function(){return i.retryGame()})}}}()}Sataku.expand=function(){return function(e,t){if(-1===[CREATION_TYPE_RICH_EXPAND,CREATION_TYPE_MOBILE_EXPAND_RICH].indexOf(e.config.creationType)&&(t.players.forEach(function(e){e.setVideo()}),t.player.start()),e.config.deviceType===DEVICE_TYPE_DESKTOP){var o=function(){var e=t.doc.expandWorkspace.clientHeight-window.innerHeight;t.doc.expandWorkspace[e>0?"stkAddClass":"stkRemoveClass"]("fixed")};window.stkListen("resize",o,!1),o()}mainFunction(e,t),t.doc.expand.stkStyleElement({visibility:"visible"}),stkLazyLoad("[data-src]",function(){}),Window.APP.intro()}}(),Sataku.expandOutro=function(e){Window.APP.outro(e)};