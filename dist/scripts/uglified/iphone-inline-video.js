"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},enableInlineVideo=function(){function e(e,n,i,r){function t(i){d=n(t,r),e(i-(o||i)),o=i}var d,o;return{start:function(){d||t(0)},stop:function(){i(d),d=null,o=0}}}function n(n){return e(n,requestAnimationFrame,cancelAnimationFrame)}function i(e,n,i){function r(r){i&&!i(e,n)||r.stopImmediatePropagation()}return e.addEventListener(n,r),r}function r(e,n,i,r){function t(){return i[n]}function d(e){i[n]=e}r&&d(e[n]),Object.defineProperty(e,n,{get:t,set:d})}function t(e,n,i){i.addEventListener(n,function(){return e.dispatchEvent(new Event(n))})}function d(e,n){Promise.resolve().then(function(){e.dispatchEvent(new Event(n))})}function o(e){var n=new Audio;return t(e,"play",n),t(e,"playing",n),t(e,"pause",n),n.crossOrigin=e.crossOrigin,n.src=e.src||e.currentSrc||"data:",n}function a(e,n,i){(m||0)+200<Date.now()&&(e[h]=!0,m=Date.now()),i||(e.currentTime=n),k[++T%3]=100*n|0}function u(e){return e.driver.currentTime>=e.video.duration}function c(e){var n=this;n.video.readyState>=n.video.HAVE_FUTURE_DATA?(n.hasAudio||(n.driver.currentTime=n.video.currentTime+e*n.video.playbackRate/1e3,n.video.loop&&u(n)&&(n.driver.currentTime=0)),a(n.video,n.driver.currentTime)):n.video.networkState===n.video.NETWORK_IDLE&&0===n.video.buffered.length&&n.video.load(),n.video.ended&&(delete n.video[h],n.video.pause(!0))}function s(){var e=this,n=e[g];if(e.webkitDisplayingFullscreen)return void e[E]();"data:"!==n.driver.src&&n.driver.src!==e.src&&(a(e,0,!0),n.driver.src=e.src),e.paused&&(n.paused=!1,0===e.buffered.length&&e.load(),n.driver.play(),n.updater.start(),n.hasAudio||(d(e,"play"),n.video.readyState>=n.video.HAVE_ENOUGH_DATA&&d(e,"playing")))}function v(e){var n=this,i=n[g];i.driver.pause(),i.updater.stop(),n.webkitDisplayingFullscreen&&n[w](),i.paused&&!e||(i.paused=!0,i.hasAudio||d(n,"pause"),n.ended&&!n.webkitDisplayingFullscreen&&(n[h]=!0,d(n,"ended")))}function p(e,i){var r={};e[g]=r,r.paused=!0,r.hasAudio=i,r.video=e,r.updater=n(c.bind(r)),i?r.driver=o(e):(e.addEventListener("canplay",function(){e.paused||d(e,"playing")}),r.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,u(r)&&a(e,0)},get ended(){return u(r)}}),e.addEventListener("emptied",function(){var n=!r.driver.src||"data:"===r.driver.src;r.driver.src&&r.driver.src!==e.src&&(a(e,0,!0),r.driver.src=e.src,n||!i&&e.autoplay?r.driver.play():r.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?i&&0===r.driver.buffered.length&&r.driver.load():(e.pause(),e[E]())}),i&&(e.addEventListener("webkitendfullscreen",function(){r.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){k.indexOf(100*e.currentTime|0)<0&&(r.driver.currentTime=e.currentTime)}))}function l(e){var n=e[h];return delete e[h],!e.webkitDisplayingFullscreen&&!n}function f(e){var n=e[g];e[E]=e.play,e[w]=e.pause,e.play=s,e.pause=v,r(e,"paused",n.driver),r(e,"muted",n.driver,!0),r(e,"playbackRate",n.driver,!0),r(e,"ended",n.driver),r(e,"loop",n.driver,!0),i(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),i(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),i(e,"timeupdate",l),i(e,"ended",l)}function y(e,n){if(void 0===n&&(n={}),!e[g]){if(!n.everywhere){if(!b)return;if(!(n.iPad||n.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var i=e.autoplay;e.autoplay=!1,p(e,!e.muted),f(e),e.classList.add("IIV"),e.muted&&i&&(e.play(),e.addEventListener("playing",function n(){e.autoplay=!0,e.removeEventListener("playing",n)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}var m,b="object"==("undefined"==typeof document?"undefined":_typeof(document))&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,g="bfred-it:iphone-inline-video",h="bfred-it:iphone-inline-video:event",E="bfred-it:iphone-inline-video:nativeplay",w="bfred-it:iphone-inline-video:nativepause",k=[],T=0;return y}();