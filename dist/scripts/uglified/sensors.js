"use strict";function Sensors(e,t){return this.stkExt({callback:e,fallback:t})}function Gyroscope(e,t,a){var n=this.stkExt({callback:e,fallback:t});return a&&(n.stkExt(a),n.isLimitedMode=!0),n.run()}function Accelerometer(e,t){return this.stkExt({callback:e,fallback:t}).run()}Sensors.prototype={callback:null,fallback:null,active:!1,eventName:null,checkoutTimeout:1e3,data:[null,null,null],onUpdate:function(e){var t=this;t.data="devicemotion"===t.eventName?[e.x,e.y,e.z]:[e.alpha,e.beta,e.gamma]},run:function(){var e=this;return void 0===window["devicemotion"===e.eventName?"DeviceMotionEvent":"DeviceOrientationEvent"]?void(e.fallback&&e.fallback()):(function(){var t={data:[],timeout:null,kill:function(){clearTimeout(t.timeout),window.stkStopListening(e.eventName,t.handler,!0),e.fallback&&e.fallback()},validate:function(){var e=[0,0,0],a=t.data.length-1;if(0===t.data.length)return!1;t.data.stkIterate(function(t,a){t.stkIterate(function(t,a){e[a]+=t})}),e.stkIterate(function(a,n){e[n]/=t.data.length});for(var n=0;n<t.data[0].length;n++){if(null===t.data[a][n])return!1;if(e[n]===t.data[a][n])return!1;if(Math.ceil(t.data[a][n])===t.data[a][n])return!1;if(Math.floor(t.data[a][n])===t.data[a][n])return!1}return!0},handler:function(a){if("devicemotion"===e.eventName&&void 0===e.type&&(e.type=a.accelerationIncludingGravity?"accelerationIncludingGravity":a.acceleration?"acceleration":-1,-1===e.type))return void t.kill();if(e.active){var n="devicemotion"===e.eventName?a[e.type]:a;return e.onUpdate&&e.onUpdate(n),void(e.callback&&e.callback(e.data))}t.data.push("devicemotion"===e.eventName?[isNaN(a[e.type].x)?null:a[e.type].x,isNaN(a[e.type].y)?null:a[e.type].y,isNaN(a[e.type].z)?null:a[e.type].z]:[isNaN(a.alpha)?null:a.alpha,isNaN(a.beta)?null:a.beta,isNaN(a.gamma)?null:a.gamma]),t.validate()&&(clearTimeout(t.timeout),e.active=!0)}};window.stkListen(e.eventName,t.handler,!0),t.timeout=setTimeout(t.kill,e.checkoutTimeout)}(),e)}},Gyroscope.prototype=new Sensors,Gyroscope.prototype.stkExt({maxValue:null,maxDeviation:null,isLimitedMode:!1,eventName:"deviceorientation",ease:STK_EASE.linear,getNormalizedValues:function(e,t){return e.stkGetSign()*(Math.min(Math.abs(e),t)/t)},getEasedValues:function(e,t){return e>1?1:e<-1?-1:e.stkGetSign()*Math.stkBezierSpline(Math.abs(e),t||this.ease)},getValues:function(e,t,a,n){var i=this;return a*i.getEasedValues(i.getNormalizedValues(e,t),n)},onUpdate:function(){var e={records:[],history:[],maxRecords:10,maxHistory:10,flipMode:null,orientation:null,firstUpdate:!0,isUpsidedown:!1,originOrientationY:null,shouldSwitchAngles:!0,origin:[null,null,null],cached:[null,null,null],damped:[null,null,null],dampedOnceMore:[null,null,null],rawData:[null,null,null],normalized:[null,null,null],calibrated:[null,null,null]},t={checkIfDeviceUpsidedown:function(){return e.rawData[1]<-90||e.rawData[1]>90||(e.rawData[2]<-90||e.rawData[2]>90)},normalizeAngle:function(t){var a=Math.abs(t)>90?180*t.stkGetSign()-t:t;return e.isUpsidedown&&(a=180*a.stkGetSign()-a),a=Math.abs(a)>90?180*a.stkGetSign()-90*Math.sin(Math.stkToRadians(a)):90*Math.sin(Math.stkToRadians(a))},setOriginDeviation:function(){e.origin=[e.normalized[0],e.normalized[1],e.normalized[2]],e.originOrientationY=e.isUpsidedown},validateFlipedGamma:function(){e.cached.stkIterate(function(t,a){null===t&&(e.cached[a]=e.normalized[a])}),e.originOrientationY!==e.isUpsidedown&&(null===e.flipMode&&(e.flipMode=!1,e.cached[2].stkGetSign()!==e.normalized[2].stkGetSign()&&(e.flipMode=!0)),e.flipMode&&(e.normalized[2]*=-1)),e.cached.stkIterate(function(t,a){e.cached[a]=e.normalized[a]})},getCalibratedData:function(){var t=[e.normalized[0]-e.origin[0],e.normalized[1]-e.origin[1],e.normalized[2]-e.origin[2]];return t.stkIterate(function(a,n){Math.abs(a)>180&&(t[n]=360*e.origin[n].stkGetSign()+t[n]),2===n&&e.shouldSwitchAngles&&e.originOrientationY!==e.isUpsidedown&&(t[n]=180*t[n].stkGetSign()-t[n],t[n]*=-1)}),t},getDampedData:function(e,t,a){var n=[0,0,0];for(e.push(t);e.length>a;)e.shift();return e.stkIterate(function(e,t){e.stkIterate(function(e,t){n[t]+=e})}),n.stkIterate(function(t,a){n[a]/=e.length}),n}};return function(a){var n=this;n.data=[a.alpha,a.beta,a.gamma],e.rawData=n.data,e.isUpsidedown=t.checkIfDeviceUpsidedown(),e.normalized=[t.normalizeAngle(e.rawData[0]),t.normalizeAngle(e.rawData[1]),t.normalizeAngle(e.rawData[2])],t.validateFlipedGamma(),e.firstUpdate&&(e.firstUpdate=!1,e.orientation=window.deviceorientation,t.setOriginDeviation()),e.orientation!==window.deviceorientation&&(e.orientation=window.deviceorientation,t.setOriginDeviation()),e.calibrated=t.getCalibratedData(),e.damped=t.getDampedData(e.records,e.calibrated,e.maxRecords),e.dampedOnceMore=t.getDampedData(e.history,e.damped,e.maxRecords),n.isLimitedMode&&e.dampedOnceMore.stkIterate(function(t,a){e.dampedOnceMore[a]=n.getValues(t,n.maxDeviation,n.maxValue,n.ease)}),n.data="portrait"===e.orientation?[e.dampedOnceMore[0],e.dampedOnceMore[1],e.dampedOnceMore[2]]:[e.dampedOnceMore[0],e.dampedOnceMore[2],e.dampedOnceMore[1]]}}()}),Gyroscope.runDefaultGyroscopeSetup=function(e,t,a){var n={step:null,gyroscope:null,activeNode:null,currentNode:null,isGyroscopeReady:!1,creationType:e,wrapper:document.stkQuery("#display"),gestureIcon:document.stkQuery("#mobileGestureIcon"),nodes:a||document.stkQuery("#display-content img, canvas, video",!0),isPortrait:e===CREATION_TYPE_MOBILE_ONEPAGE_PORTRAIT,config:t||{maxValue:100,maxDeviation:30,ease:STK_EASE.softInOut},calculateIndexOfNode:function(e){for(var t=0,a=0,i=-n.config.maxValue;t<n.nodes.length;t++,i+=n.step)e>=i&&(a=t);return a},transform:function(e){if(e=e>n.config.maxValue?n.config.maxValue:e,n.creationType===CREATION_TYPE_MOBILE_MULTI_RECTANGLE)return n.currentNode=n.calculateIndexOfNode(e),void(n.currentNode!==n.activeNode&&(n.nodes[n.activeNode].style.display="none",n.nodes[n.currentNode].style.display="block",n.activeNode=n.currentNode));n.nodes.stkIterate(function(t,a){t.stkTransform("translate"+(n.isPortrait?"Y":"X")+"("+(e<0?0:-e)+"%)")})},showGestureIcon:function(){n.isGyroscopeReady||(n.isGyroscopeReady=!0,n.gestureIcon.src="https://4stk.com/sataku/szablon/images/mobile/"+(n.gyroscope.active?"gyro":"swipe_"+(n.isPortrait?"v":"h"))+".png?version=0.0",n.gestureIcon.style.display="block",n.gestureIcon.stkAddClass("animation"+(n.gyroscope.active?"G":n.isPortrait?"Y":"X")),n.gyroscope.active&&setTimeout(function(){n.killGestureIcon()},5e3))},killGestureIcon:function(){n.gestureIcon.remove()},callback:function(e){n.showGestureIcon(),n.transform(n.isPortrait?e[1]:e[2])},fallback:function(e){var t=!1;n.showGestureIcon(),new Gestures(n.wrapper).trackSwipeHandler=function(e){t||(t=!0,n.killGestureIcon()),n.transform(n.isPortrait?e[1]:e[0])}}};return n.stkExt({step:2*n.config.maxValue/n.nodes.length,activeNode:Math.floor(n.nodes.length/2),gyroscope:new Gyroscope(n.callback,n.fallback,n.config)}),n.gyroscope},Accelerometer.prototype=new Sensors,Accelerometer.prototype.stkExt({type:void 0,captureShakePower:9,eventName:"devicemotion",captureShake:function(e,t){var a=this;!function(){var n={diff:[null,null,null],power:a.captureShakePower,previousCallback:a.callback,deltaMessure:[null,null,null],currentMessure:[null,null,null],lastMeasure:[void 0,void 0,void 0],handler:function(i){-1!==n.lastMeasure.indexOf(void 0)&&(n.lastMeasure=[i[0],i[1],i[2]]),n.currentMessure=[i[0],i[1],i[2]],n.deltaMessure.stkIterate(function(e,t){n.deltaMessure[t]=n.currentMessure[t]-n.lastMeasure[t]}),(Math.abs(n.deltaMessure[0])>=n.power||Math.abs(n.deltaMessure[2])>=n.power)&&(t&&(a.callback=n.previousCallback),e&&e()),n.lastMeasure=n.currentMessure}};a.callback=n.handler}()}});